---
title_en: "Cloud Deployment and Local Setup"
title_zh: "云端部署+本地+基础设置"
type: "course"
lesson_number: 12
date: 2024-06-01
status: "published"
tags: ["ComfyUI", "Stable Diffusion", "AI Art"]
---

# 1-2. 云端部署+本地+基础设置

# 开头

本次课程，我们将学习安装部署我们的comfyui工具。

掌握新技术总是令人兴奋，但有时候，本地安装环境的复杂性可能会令人望而却步。举个例子，即便是经验丰富的工程师，它可能也需要花上半天时间来安装一个复杂的插件。对于没有编程基础的同学来说，这个过程可能更加困难。因此，我们推荐大家使用云端平台，这样可以简化安装过程。

课程内容分两部分进行：首先，我们会详细介绍如何使用 onethingAI 进行云端部署；

然后，我们将探讨如何利用秋叶提供的ComfyUI整合包，实现快速且高效的安装部署。准备好了吗？让我们开始吧，轻松掌握这些关键技术！

# 目录及内容

## 云端部署onethingAI

目前我们已经在onethingAI平台上预配置了本课程所需的所有插件。开始使用之前，首先进行注册和登录[https://onethingai.com/](https://onethingai.com/)。

![Untitled (1).png](Untitled_(1).png)

接下来，我们需要进行充值。云端使用的费用  是根据使用时间来计算的，4090的服务器每小时约2.5元，活动期间会有所打折，比如节假日期间，4090活动价格可能低至1.5/h。刚注册平台，你可以选择充值金额和支付方式，然后点击“确认充值”即可。

注意不是广告，我们也没有赚钱onethingAI平台的中介费，如果同学有很合适ComfyUI的云端网站，也可以推荐

![Untitled (2).png](Untitled_(2).png)

![Untitled (3).png](Untitled_(3).png)

氪金完成之后，回到“总览”，首页产品平台找到“AI实验室”,点击进入后

![Untitled](Untitled%2011.png)

来到此界面，

因为我这个账号因为7天内使用过了，所以界面有一个使用记录栏在那里，有这个使用栏的话，你就可以直接点击”启用“进入comfyui。

![Untitled (4).png](Untitled_(4).png)

如果你没有使用过，点击”创建应用“，在comfyui中找到破壳丹塔，点击进入后，选择gpu资源，前期可以选择3060比较划算，后期案例教学时候比较复杂，建议选择3090/4090。 

![Untitled](Untitled%2012.png)

![Untitled](Untitled%2013.png)

特别注意，有时候左上角显示GPU不足，启用键 为灰色的时候，说明用的人太多了，没位置了，

![Untitled](Untitled%2014.png)

那么只需要在”更多“中，选择”应用克隆“，选好GPU即可。

![Untitled](Untitled%2015.png)

一切准备就绪，选择立即创建。

接着我们可以在界面看到”部署中/运行中“，我们可以在别名处写上自己标记。

![Untitled](Untitled%2016.png)

接着点击comfyui即可进入工作界面。

首次启动可能需要一些时间，请耐心等待。点击ComfyUI，等待系统加载完成，然后你就可以开始你的创意旅程了！加载成功后界面会自带一个工作流，我们可以点击”queue prompt“来启动我们的工作流。ok，这就代表了部署成功了。

![Untitled](Untitled%2017.png)

不过，随着插件的不断更新和迭代，你可能需要手动更新或安装一些新增的插件。

这个时候，只需进入“manager”部分。在这里，你可以轻松安装任何缺失的节点。安装完成后，界面上会出现一个“restart”按钮，点击它就会重启环境。

![Untitled](Untitled%2018.png)

接下来，你需要耐心等待，直到画面中心的“reconnecting”标志消失。

![Untitled](Untitled%2019.png)

最后，重新刷新你的页面，新的环境就准备好了。点击启动，

![Untitled (5).png](Untitled_(5).png)

首次使用出图过程中会报错，属于正常现象，关掉继续即可。

一切准备就绪，我们跑一个丹塔的独家工作流试试看。

下载好的json文件，直接拖进来，没有报红就可以点击queue prompt直接生成

![ComfyUI_temp_plsgq_00004_.png](ComfyUI_temp_plsgq_00004_.png)

[03workflow_photograph change face.json](03workflow_photograph_change_face.json)

另外，如果你有喜欢的大模型/lora模型，可以回到应用界面，在模型目录里上传模型即可，成功后记得重新启动comfyui即可。已经上传过的模型，只要你7天内登陆过，就无需再次上传，插件安装也是同理。

![Untitled](Untitled%2020.png)

## 秋叶整合包

虽然我们不特别推荐本地部署 ComfyUI，但是如果你选择本地部署，我们会在社区里面提供必要的安装包。需要注意的是，插件环境的配置可能需要您自行探索，因为不同的硬件和软件版本可能会影响安装的成败，我们无法为每位同学提供个别化的故障排除服务，需要同学自行探索。因此，为了保证使用体验，我们更建议您采用我们的云端部署方案。

对于选择本地部署的用户，请先下载并解压我们提供的秋叶大佬整合包。

![Untitled](Untitled%2021.png)

解压后找到“A绘世启动器”的程序文件，双击它启动程序。一旦程序完成验证，你就会看到熟悉的绘世启动器界面。

![Untitled](Untitled%2022.png)

在启动器首页，有四个实用按钮，它们能让你快速访问根目录、自定义节点（custom nodes）目录和图片存储路径。

![Untitled](Untitled%2023.png)

在界面的右下角，你会找到一个“一键启动”按钮，点击它即可开启网页操作界面。

![Untitled](Untitled%2024.png)

接下来，你还需要留意“版本管理”板块，它包含三项重要功能：内核管理、拓展管理和安装新扩展。

![Untitled](Untitled%2025.png)

在“内核”板块中，你可以查看并更新ComfyUI的版本，以确保所有节点正常工作。更新很简单：先点击右上角的刷新按钮，然后选择最新版本并点击“切换”按钮。系统会显示一个绿色的提示框，确认版本已成功更新。

![Untitled](Untitled%2026.png)

在“拓展”板块中，你会看到自定义节点的更新状态。这些自定义节点类似于WebUI中的扩展插件，可以增加多种功能。秋叶的整合包已经预装了超过20种常用的自定义节点，如Manager、Conntrolnet、IPAdapter等，使新手也能轻松上手。

![Untitled](Untitled%2027.png)

如果你需要安装新的自定义节点，可以在“安装新扩展”板块中搜索或通过Git网址进行安装。第一次安装可能优点复杂，没关系，我会在下一节课详细讲解安装插件和模型的多种方式。

![Untitled](Untitled%2028.png)

在启动生成图像之前，请确保已安装所需的大型模型。如果你已经有了SD WebUI和相关模型，可以选择共享模型目录的方式安装，这样可以避免重复安装并节省磁盘空间。

为了共享SD WebUI的模型目录，先找到ComfyUI根目录中的`extra_model_paths.yaml.example`文件，去掉文件名中的`.example`。

![Untitled](Untitled%2029.png)

用记事本打开这个文件，将`base_path: path/to/stable-diffusion-webui/`中的路径改为你电脑上SD WebUI的实际路径，比如`base_path: C:\\sd-webui-aki-v4.3`。保存并关闭文件后，你就完成了设置。

![Untitled](Untitled%2030.png)

通过以上步骤，你将能够充分利用秋叶的整合包，开启你的创作之旅。

我们一样把之前的创意摄影工作流导入，发现很多报错，没有办法直接用，这是正常的。本地部署的同学选择manager中 缺失插件安装，如果安装失败的话，下一节课我们会提供更多的插件安装方法。

# 结尾

今天的课程讲到onethingAI的部署，以及如何使用秋叶的ComfyUI整合包，进行一站式安装。记住，技术的掌握需要不断的实践和学习，所以我鼓励大家继续实验和探索这些工具。如果你有任何问题或需要进一步的指导，可以在社区把问题提出来，有专门的老师进行解答。

下一节课，我们将学习插件和模型的安装。